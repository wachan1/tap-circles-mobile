
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Tap Circles Game</title>
  <style>
    body {
      margin: 0;
      background: #111;
      font-family: Arial, sans-serif;
      overflow: hidden;
      color: white;
    }
    #gameCanvas {
      display: block;
      margin: 0 auto;
      background: #222;
      touch-action: none;
    }
    #topBar, #bottomBar {
      position: absolute;
      left: 0;
      width: 100%;
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px;
      background: rgba(0,0,0,0.6);
      z-index: 10;
    }
    #topBar { top: 0; }
    #bottomBar { bottom: 0; }
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      background: #444;
      color: white;
      cursor: pointer;
    }
    #pauseOverlay {
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.8);
      display: none;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      z-index: 20;
      color: white;
      font-size: 24px;
    }
    #pauseOverlay button {
      margin-top: 20px;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <div id="topBar">
    <div>Score: <span id="score">0</span></div>
    <div>High: <span id="highScore">0</span></div>
  </div>
  <canvas id="gameCanvas"></canvas>
  <div id="bottomBar">
    <button id="restartBtn">Restart</button>
    <button id="pauseBtn">Pause</button>
  </div>
  <div id="pauseOverlay">
    <div>Game Paused</div>
    <button id="resumeBtn">Resume</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let width = window.innerWidth;
    let height = window.innerHeight;
    canvas.width = width;
    canvas.height = height;

    let circles = [];
    let score = 0;
    let highScore = parseInt(localStorage.getItem('tap-best')) || 0;
    let roundHigh = 0;
    let lastSpawn = 0;
    let spawnInterval = 2000;
    let baseSpawnInterval = 2000;
    let baseGrowth = 0.5;
    let running = true;
    let startTime = Date.now();
    let paused = false;

    document.getElementById('highScore').textContent = highScore;

    class Circle {
      constructor() {
        this.x = Math.random() * width;
        this.y = Math.random() * height;
        this.r = 10;
        this.alive = true;
      }
      update(dt, growth) {
        this.r += growth * dt;
        if (this.r > 100) {
          this.alive = false;
          score = Math.max(0, score - 5);
          if (score === 0) endRound();
        }
      }
      draw() {
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.r, 0, 2 * Math.PI);
        ctx.fillStyle = 'red';
        ctx.fill();
      }
      isHit(x, y) {
        const dx = this.x - x;
        const dy = this.y - y;
        return dx*dx + dy*dy <= this.r*this.r;
      }
    }

    function spawnCircle() {
      circles.push(new Circle());
    }

    function update() {
      if (!running || paused) return;
      const now = Date.now();
      const elapsed = (now - startTime) / 1000;

      let dt = 0.016;
      const maxCircles = Math.min(6, 2 + Math.floor(elapsed/10));
      const growth = baseGrowth * (1 + elapsed/30);
      spawnInterval = baseSpawnInterval * Math.max(0.3, 1 - elapsed/60);

      circles.forEach(c => c.update(dt, growth));
      circles = circles.filter(c => c.alive);

      if (now - lastSpawn > spawnInterval && circles.length < maxCircles) {
        spawnCircle();
        lastSpawn = now;
      }

      ctx.clearRect(0,0,width,height);
      circles.forEach(c => c.draw());

      requestAnimationFrame(update);
    }

    canvas.addEventListener('click', (e) => {
      if (!running || paused) return;
      const rect = canvas.getBoundingClientRect();
      const x = e.clientX - rect.left;
      const y = e.clientY - rect.top;
      for (let i = circles.length-1; i>=0; i--) {
        if (circles[i].isHit(x,y)) {
          circles.splice(i,1);
          score++;
          roundHigh = Math.max(roundHigh, score);
          let displayHigh = Math.max(roundHigh, highScore);
          if (roundHigh > highScore) {
            highScore = roundHigh;
            localStorage.setItem('tap-best', highScore);
          }
          document.getElementById('score').textContent = score;
          document.getElementById('highScore').textContent = displayHigh;
          break;
        }
      }
    });

    function endRound() {
      roundHigh = 0;
      score = 0;
      document.getElementById('score').textContent = score;
      circles = [];
    }

    document.getElementById('restartBtn').addEventListener('click', () => {
      score = 0;
      roundHigh = 0;
      startTime = Date.now();
      circles = [];
      running = true;
      document.getElementById('score').textContent = score;
    });

    document.getElementById('pauseBtn').addEventListener('click', () => {
      paused = true;
      document.getElementById('pauseOverlay').style.display = 'flex';
    });

    document.getElementById('resumeBtn').addEventListener('click', () => {
      paused = false;
      document.getElementById('pauseOverlay').style.display = 'none';
      requestAnimationFrame(update);
    });

    update();
  </script>
</body>
</html>
